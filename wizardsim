-- Load Rayfield for the UI
getgenv().SecureMode = true
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Local variables
local Player = game:GetService("Players").LocalPlayer
local Humanoid = Player.Character:WaitForChild("Humanoid")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Quest and Autofarm settings
local SelectedQuest = "LJ:1"
local AutoQuestToggle = false
local AutoFarmToggle = false
local SelectedNPC = "Dummy"

-- GUI Setup
local Window = Rayfield:CreateWindow({
    Name = "Quest & Autofarm",
    LoadingTitle = "Wave AI",
    LoadingSubtitle = "by SPDM Team"
})

-- Quest Tab
local QuestTab = Window:CreateTab("Quest", nil)

-- Dropdown for quest selection
local QuestDropdown = QuestTab:CreateDropdown({
    Name = "Select Quest",
    Options = {
        "LJ:1", "LJ:2", "BT:1", "CH:1", "LP:1", "WS:1", "OM:1", "VB:1", "CJ:1"
    },
    CurrentOption = {"LJ:1"},
    Flag = "QuestDropdown",
    Callback = function(Option)
        SelectedQuest = Option[1]
    end,
})

-- Auto Quest Toggle
QuestTab:CreateToggle({
    Name = "Auto Accept Quest",
    CurrentValue = false,
    Flag = "AutoQuestToggle",
    Callback = function(Value)
        AutoQuestToggle = Value
        while AutoQuestToggle do
            ReplicatedStorage.Remote.AcceptQuest:FireServer(SelectedQuest)
            wait(5)  -- Adjust delay as needed
        end
    end
})

-- Autofarm Tab
local AutoFarmTab = Window:CreateTab("Autofarm", nil)

-- Dropdown for NPC selection
local NPCDropdown = AutoFarmTab:CreateDropdown({
    Name = "Select NPC to Farm",
    Options = {
        "Dummy", "DummyWarrior", "Spider", "Wolf", "Bear", "StoneGolem"
    },
    CurrentOption = {"Dummy"},
    Flag = "NPCDropdown",
    Callback = function(Option)
        SelectedNPC = Option[1]
    end,
})

-- Auto Farm Toggle
AutoFarmTab:CreateToggle({
    Name = "Auto Farm NPC",
    CurrentValue = false,
    Flag = "AutoFarmToggle",
    Callback = function(Value)
        AutoFarmToggle = Value
        while AutoFarmToggle do
            local args = {
                [1] = 1,  -- Adjust spell ID if needed
                [2] = workspace.Levels.Forest.Enemies[SelectedNPC]
            }
            ReplicatedStorage.Remote.CastSpell:FireServer(unpack(args))
            wait(2)  -- Adjust delay for farming speed
        end
    end
})

-- GUI Complete
Rayfield:Notify({
    Title = "Quest & Autofarm Script Loaded",
    Content = "You can now select quests and farm NPCs.",
    Duration = 5
})
