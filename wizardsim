-- Rayfield GUI Setup
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()

local Window = Rayfield:CreateWindow({
    Name = "AutoFarm & AutoQuest GUI",
    LoadingTitle = "Loading GUI...",
    LoadingSubtitle = "By WaveAI",
})

-- Variables
local autofarmEnabled = false
local autoQuestEnabled = false
local selectedNPC = "workspace.Levels.Forest.Enemies.Dummy" -- default NPC
local selectedQuest = "LJ:1" -- default quest
local Cooldown = 1 -- Default spell cooldown

-- Main Tab
local Tab = Window:CreateTab("AutoFarm & AutoQuest", 4483362458) -- Icon is optional

-- NPC Selector
local npcSection = Tab:CreateSection("Select NPC to Farm")
local NPCDropdown = Tab:CreateDropdown({
    Name = "Select NPC",
    Options = {
        "workspace.Levels.Forest.Enemies.Dummy",
        "workspace.BossArenas.CandyChomper.Enemies.StaticWaypoint",
        "workspace.Levels.Magma.Enemies.MagmaSpider"
        -- Add more NPCs from your autofarm.txt file
    },
    Callback = function(npc)
        selectedNPC = npc
    end
})

-- Quest Selector
local questSection = Tab:CreateSection("Select Quest")
local QuestDropdown = Tab:CreateDropdown({
    Name = "Select Quest",
    Options = {
        "LJ:1", "LJ:2", "BT:1", "BT:2", "CH:1" -- Add more quests from your quest.txt
    },
    Callback = function(quest)
        selectedQuest = quest
    end
})

-- Cooldown Slider
local sliderSection = Tab:CreateSection("Cooldown")
Tab:CreateSlider({
    Name = "Adjust Cooldown",
    Range = {0.5, 5}, -- Cooldown range between 0.5 to 5 seconds
    Increment = 0.1,
    Suffix = "Seconds",
    CurrentValue = 1,
    Callback = function(value)
        Cooldown = value
    end
})

-- AutoFarm Toggle Button
local autofarmSection = Tab:CreateSection("AutoFarm Control")
Tab:CreateToggle({
    Name = "Enable AutoFarm",
    CurrentValue = false,
    Callback = function(state)
        autofarmEnabled = state
        if autofarmEnabled then
            AutoFarm()
        end
    end
})

-- AutoQuest Toggle Button
Tab:CreateToggle({
    Name = "Enable AutoQuest",
    CurrentValue = false,
    Callback = function(state)
        autoQuestEnabled = state
        if autoQuestEnabled then
            AutoQuest()
        end
    end
})

-- AutoFarm Function with two spell casts
function AutoFarm()
    while autofarmEnabled do
        -- First Spell
        local args1 = { [1] = 1, [2] = selectedNPC }
        game:GetService("ReplicatedStorage").Remote.CastSpell:FireServer(unpack(args1))
        
        -- Second Spell
        local args2 = { [1] = 2, [2] = selectedNPC }
        game:GetService("ReplicatedStorage").Remote.CastSpell:FireServer(unpack(args2))

        wait(Cooldown) -- Use the dynamic cooldown
    end
end

-- AutoQuest Function
function AutoQuest()
    while autoQuestEnabled do
        local args = { [1] = selectedQuest }
        game:GetService("ReplicatedStorage").Remote.AcceptQuest:FireServer(unpack(args))
        wait(1) -- Adjust wait time if needed
    end
end

-- Initialization
Rayfield:Notify({
    Title = "GUI Loaded",
    Content = "Select your NPC and Quest to farm.",
    Duration = 6.5,
})
