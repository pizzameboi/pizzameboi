-- Load Rayfield Library (Make sure it's correctly installed)
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()

-- Variables for Auto TP and Auto Hit
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")
local breakables = workspace.GameObjects.Breakables
local autoHitEnabled = false
local autoTPEnabled = false

-- Function to find the nearest breakable to the player
local function getNearestBreakable()
    local nearest = nil
    local minDistance = math.huge
    for _, breakable in ipairs(breakables:GetChildren()) do
        if breakable:IsA("BasePart") and breakable.Parent then
            local distance = (hrp.Position - breakable.Position).Magnitude
            if distance < minDistance then
                minDistance = distance
                nearest = breakable
            end
        end
    end
    return nearest
end

-- Function to auto-hit the nearest breakable
local function autoHit()
    spawn(function()
        while autoHitEnabled do
            local nearestBreakable = getNearestBreakable()
            if nearestBreakable then
                local args = { [1] = nearestBreakable.Name }
                game:GetService("ReplicatedStorage")
                    :WaitForChild("Packages")
                    :WaitForChild("Knit")
                    :WaitForChild("Services")
                    :WaitForChild("BreakableService")
                    :WaitForChild("RF")
                    :WaitForChild("HitBreakable")
                    :InvokeServer(unpack(args))
            end
            wait(0.05) -- Hit every 0.05 seconds
        end
    end)
end

-- Function to auto-TP to each breakable with cooldown
local function autoTP()
    spawn(function()
        while autoTPEnabled do
            for _, breakable in ipairs(breakables:GetChildren()) do
                if breakable:IsA("BasePart") and breakable.Parent then
                    player.Character:MoveTo(breakable.Position)
                    wait(7) -- Cooldown of 7 seconds
                end
            end
        end
    end)
end

-- Rayfield GUI Setup
local Window = Rayfield:CreateWindow({
    Name = "Breakable Auto Tool",
    LoadingTitle = "Initializing...",
    LoadingSubtitle = "by WaveAI",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil, -- Use default folder
        FileName = "BreakableTool"
    }
})

local Tab = Window:CreateTab("Main", 4483362458) -- Example icon ID

-- Button to Toggle Auto Hit
Tab:CreateButton({
    Name = "Toggle Auto Hit",
    Callback = function()
        autoHitEnabled = not autoHitEnabled
        if autoHitEnabled then
            autoHit()
        end
    end
})

-- Button to Toggle Auto TP
Tab:CreateButton({
    Name = "Toggle Auto TP",
    Callback = function()
        autoTPEnabled = not autoTPEnabled
        if autoTPEnabled then
            autoTP()
        end
    end
})

Rayfield:Notify({
    Title = "Breakable Auto Tool",
    Content = "Loaded successfully!",
    Duration = 5,
    Image = 4483362458
})
